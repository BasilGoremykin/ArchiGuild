# ADR.002 Выбор шаблона интеграции для межсервисного взаимодействия

* Статус: Принято
* Владалец: vvgoremy10@mts.ru

## Контекст
Определение наилучшего способа взаимодействия между микросервисами и клиентскими приложениями (веб и мобильными) в системе для проведения конференции для разработчиков, учитывая межсервисное взаимодействие и взаимодействие с клиентскими приложениями.

## Варианты решения
### Вариант 1. REST
REST (Representational State Transfer) - архитектурный стиль, основанный на передаче данных через HTTP.

* **Критерии сравнения**
  * Удобство для клиентских приложений: Простота использования и поддержка большинством клиентских библиотек.
  * Производительность: Неплохая, но с некоторыми издержками из-за дополнительных заголовков HTTP.
  * Гибкость: Ограничена возможностями HTTP и форматами данных (JSON, XML).

### Вариант 2. GraphQL
GraphQL - язык запросов и среда выполнения, позволяющий клиентам запрашивать только необходимые данные.

* **Критерии сравнения**
  * Удобство для клиентских приложений: Высокая степень гибкости, клиенты могут определять данные, которые им нужны.
  * Производительность: Оптимизация за счет запросов только необходимых данных и возможности объединения запросов.
  * Гибкость: Высокая, благодаря возможности создания произвольных запросов и мутаций.

### Вариант 3. gRPC
gRPC - современный фреймворк удаленного вызова процедур с поддержкой множества языков и оптимизированным протоколом передачи данных.

* **Критерии сравнения**
  * Удобство для клиентских приложений: Сложнее, чем REST и GraphQL, так как требует определения схемы и использования специфических библиотек.
  * Производительность: Очень высокая, благодаря бинарному протоколу передачи данных (Protocol Buffers) и использованию HTTP/2.
  * Гибкость: Средняя, так как требует определения схемы взаимодействия.

## Решение
Мы используем REST для взаимодействия между веб и мобильными клиентами и API Gateway, так как это просто в использовании, хорошо поддерживается большинством клиентских библиотек и позволяет обеспечить удобное взаимодействие. Для межсервисного взаимодействия мы используем gRPC, так как он предлагает высокую производительность, эффективность и поддержку используемых языков программирования. В дальнейшем, при росте системы, может потребоваться рассмотреть возможность использования других протоколов взаимодействия, если текущий выбор будет оказывать негативное влияние на производительность или гибкость системы.

## Последствия 
* **Положительные**
  * Высокая производительность и эффективность межсервисного взаимодействия с использованием gRPC.
  * Простота и удобство взаимодействия клиентов с системой через REST.
* **Отрицательные**
  * Необходимость поддерживать разные протоколы взаимодействия для клиент-серверного и межсервисного общения.