# ADR.001 Выбор стратегии консистентности для системы конференции

* Статус: Принято
* Владелец: vvgoremy10@mts.ru

## Контекст
Для обеспечения надежности и гарантии работы системы конференции, необходимо определить стратегию консистентности данных. Решение должно учитывать использование различных микросервисов и инструментов, находящихся в ландшафте технологического радара МТС.

## Варианты решения
### Вариант 1. ACID
ACID - набор свойств, обеспечивающих надежность транзакций, что гарантирует строгую консистентность данных
* **Плюсы**
  * Строгая консистентность данных: все операции с данными на коференции, пользователях и оплате будут согласованы.
  * Простота разработки и обработки ошибок: упрощает разработку и отладку приложения в случаях, когда требуется согласованность данных
  * Используемая база данных (PostgreSQL) поддерживает ACID.
* **Минусы**
  * Меньшая масштабируемость по сравнению с иными решениями, что может стать проблемой при увеличении нагрузки на систему.

### Вариант 2. BASE
BASE - альтернативный подход к обеспечению консистентности, подразумевает большую доступность и масштабируемость, но с отсроченной консистентностью данных.
* **Плюсы**
  * Большая масшабируемость: система может выдерживать большой объес данных и пользователей
  * Толерантность ко временным изменениям: обеспечение работоспособности системы в случае возникновения сетевых проблем
* **Минусы**
  * Сложность в обработке ошибок и разработке: необходимо реализовывать механизмы для обработки временной несогласованности данных (например, в случаях изменения статуса конференции или оплаты)
  * Не все базы данных поддерживают BASE

### Вариант 3. CA
CA - подход, который позволяет выбрать баланс между консистентностью и доступностью, путем ограничения требований к системе.
* **Плюсы**
  * Строгая консистентность и доступность данных: подходит для систем с высокими требованиями к доступности и консистентности данных
* **Минусы**
  * Меньшая масштабируемость по сравнению с BASE и PC/EC: может ограничить рост системы
  * Не толерантно к временным разделениям: может вызвать проблемы с доступностью системы в случае сетевых проблем

### Вариант 4. PC/EC
PC/EC - подход, который предлагает разделение системы на согласованные и временно несогласованные части, с возможностью обработки ошибок и выбором баланса между консистентностью и доступностью.
* **Плюсы**
  * Толерантность к временным разделениям (partition tolerance): обеспечивает работоспособность системы в случае возникновения проблем
  * Гарантии консистентности или доступности на выбор: можно выбрать подходящий баланс между консистентностью и доступностью в зависимости от требований к системе
* **Минусы**
  * Сложность в обработке ошибок и разработке: необходимо реализовывать механизмы для обработки временной несогласованности данных (например, в случаях изменения статуса конференции или оплаты)
  * Не все базы данных поддерживают PC/EC

## Решение
Мы выбираем ACID в качестве стратегии консистентности данных для нашей системы конференций. Это решение обеспечит надежность работы системы и снизит сложность разработки, так как используемая база данных (PostgreSQL) поддерживает ACID. В случае конференций для разработчиков, строгая консистентность данных является критически важным фактором, который может оправдать ограничения по масштабируемости.

## Последствия 
Выбор ACID повлечет за собой следующие последствия:
* **Положительные**
  * Строгая консистентность данных: все операции с данными на конференциях, пользователях и оплате будут согласованы
  * Простота разработки и обработки ошибок: упрощает разработку и отладку приложения в случаях, когда требуется согласованность данных
* **Отрицательные**
  * Меньшая масштабируемость по сравнению с BASE: может стать проблемой при увеличении нагрузки на систему
  * Возможная необходимость оптимизации производительности в будущем, если нагрузка на систему значительно возрастет